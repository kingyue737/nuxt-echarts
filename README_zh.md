# nuxt-echarts: åœ¨Nuxté¡¹ç›®ä¸­è½»æ¾é›†æˆECharts

åœ¨Nuxt/Vueä¸­ä½¿ç”¨EChartséœ€è¦è®¸å¤šé¢å¤–çš„é…ç½®ï¼Œè¿˜è¦æ³¨æ„åœ¨å¼€å¯Nuxt SSRæ—¶ä¸å¼•å…¥åœ¨æœåŠ¡ç«¯æ— æ³•è¿è¡Œçš„ä»£ç ã€‚nuxt-echartsæ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹è€Œç”Ÿã€‚åªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±èƒ½å®Œæˆå®‰è£…ï¼Œè¿˜æä¾›äº†åŒæ—¶é…ç½®æŒ‰éœ€å¼•å…¥å’ŒTypeScriptç±»å‹çš„ç»Ÿä¸€è®¾ç½®ã€‚

[Github â†’](https://github.com/kingyue737/nuxt-echarts)

[æ–‡æ¡£ â†’](https://echarts.nuxt.dev)

## åŠŸèƒ½

- â›° **æœåŠ¡ç«¯æ¸²æŸ“ (SSR):** ä½¿ç”¨ Nuxt æœåŠ¡ç«¯ç»„ä»¶è¿›è¡ŒæœåŠ¡ç«¯ SVG æ¸²æŸ“

- â™¾ï¸ **å®¢æˆ·ç«¯æ°´åˆ (Hydration):** æŒ‰éœ€æ‡’åŠ è½½å®Œæ•´çš„ ECharts æˆ–è½»é‡åŒ–çš„å®¢æˆ·ç«¯è¿è¡Œæ—¶
- ğŸ› ï¸ **å¯é…ç½®:** ä»…å¯¼å…¥å¿…è¦çš„ ECharts åŠŸèƒ½ä»¥ç¼©å°æ‰“åŒ…ä½“ç§¯
- ğŸ¦¾ **å¼ºç±»å‹æ”¯æŒ:** æ ¹æ®ç”¨æˆ·é…ç½®è‡ªåŠ¨å¯¼å…¥ ECharts çš„é€‰é¡¹ç±»å‹
- ğŸŒ² **Tree-shaking:** åªæœ‰ä½¿ç”¨åˆ°çš„ç»„ä»¶æ‰ä¼šè¢«æ„å»ºæ‰“åŒ…

## å®‰è£…

```bash
npx nuxi module add echarts
```

## å¿«é€Ÿä¸Šæ‰‹

åœ¨`nuxt.config.ts`ä¸­é…ç½®éœ€è¦ç”¨åˆ°çš„åŠŸèƒ½ï¼ˆç¼©å°æ‰“åŒ…ä½“ç§¯ï¼Œé¿å…å¼•å…¥æ•´ä¸ªEChartsï¼‰ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  modules: ['nuxt-echarts'],
  echarts: {
    charts: ['BarChart'],
    components: ['DatasetComponent', 'GridComponent', 'TooltipComponent'],
  },
})
```

ç„¶åå°±å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨`<VChart>`ç»„ä»¶äº†ï¼Œå¦‚æœæ˜¯TypeScripté¡¹ç›®ï¼Œä½ è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨æŒ‰ç…§ä¸Šé¢çš„é…ç½®è‡ªåŠ¨ç”Ÿæˆçš„`ECOption`ç±»å‹ï¼Œä¸ºEChartsé…ç½®æä¾›ç±»å‹æç¤ºï¼š

```vue [app/components/example.vue]
<script setup lang="ts">
const option = ref<ECOption>({
  dataset: {
    dimensions: ['Product', '2015', '2016', '2017'],
    source: [
      {
        Product: 'Matcha Latte',
        2015: 54,
        2016: 42,
        2017: 23,
      },
    ],
  },
  xAxis: { type: 'category' },
  yAxis: {},
  series: [{ type: 'bar' }],
})
</script>

<template>
  <VChart :option="option" />
</template>
```

<details>
  <summary>ç¼©å°åŒ…ä½“ç§¯å’Œè‡ªåŠ¨ç”Ÿæˆç±»å‹æ˜¯å¦‚ä½•å®ç°çš„</summary>
  
  nuxt-echarts ä¼šæ ¹æ®ä½ åœ¨`nuxt.config.ts`ä¸­çš„é…ç½®è‡ªåŠ¨ç”Ÿæˆä¸‹é¢ä¸¤ä¸ªæ–‡ä»¶ï¼Œè‡ªåŠ¨å¼•å…¥åˆ°é¡¹ç›®ä¸­:

  ```ts [app/.nuxt/echarts.mjs]
  import { use } from 'echarts/core'
  import { SVGRenderer } from 'echarts/renderers'
  import { BarChart } from 'echarts/charts'
  import {
    DatasetComponent,
    GridComponent,
    TooltipComponent,
  } from 'echarts/components'

  use([
    SVGRenderer,
    BarChart,
    DatasetComponent,
    GridComponent,
    TooltipComponent,
  ])
  ```

  ```ts [app/.nuxt/types/nuxt-echarts.d.ts]
  // Generated by nuxt-echarts

  import type { ComposeOption } from 'echarts/core'
  import type { BarSeriesOption } from 'echarts/charts'
  import type {
    DatasetComponentOption,
    GridComponentOption,
    TooltipComponentOption,
  } from 'echarts/components'

  declare global {
    export type ECOption = ComposeOption<
      | BarSeriesOption
      | DatasetComponentOption
      | GridComponentOption
      | TooltipComponentOption
    >
  }

  export {}
  ```

</details>


`<VChart>` å…¶å®å°±æ˜¯[Vue-ECharts](https://github.com/ecomfe/vue-echarts)ï¼Œç”¨æ³•å®Œå…¨ä¸€æ ·ã€‚æœ¬é¡¹ç›®ä¸ºVue-EChartsæä¾›äº†Nuxté¡¹ç›®çš„ä¸€é”®é›†æˆï¼ŒåŒæ—¶è¿˜å¢åŠ äº†ECharts æœåŠ¡ç«¯æ¸²æŸ“åŠŸèƒ½ã€‚

## è¿›é˜¶åŠŸèƒ½ï¼šECharts SSR

é€šå¸¸å³ä½¿æ˜¯å¼€å¯äº†Nuxtçš„SSRï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨EChartsæ—¶ä¹Ÿä»…æ˜¯åœ¨å®¢æˆ·ç«¯ç»„ä»¶æŒ‚è½½åæ‰æ¸²æŸ“å›¾è¡¨ï¼Œä»æœåŠ¡ç«¯å‘é€è¿‡æ¥çš„HTMLæ˜¯ä¸å«å›¾è¡¨çš„ã€‚

![å®¢æˆ·ç«¯æ¸²æŸ“](/csr.png)

EChartsåœ¨v5.3å’Œv5.5ä¸­åˆ†åˆ«å¼•å…¥äº†[æœåŠ¡ç«¯SVGæ¸²æŸ“åŠŸèƒ½å’Œå®¢æˆ·ç«¯è½»é‡è¿è¡Œæ—¶](https://echarts.apache.org/handbook/zh/how-to/cross-platform/server/)ï¼ˆè¯·åŠ¡å¿…å…ˆé˜…è¯»è¿™ä¸ªå®˜æ–¹æ–‡æ¡£ï¼‰ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨å‰ç«¯ç¬¬ä¸€æ—¶é—´æ˜¾ç¤ºå›¾è¡¨ï¼Œè€Œä¸”å¯ä»¥åœ¨ä¸€äº›æ— éœ€å¤æ‚äº¤äº’çš„åœºæ™¯ä¸‹å¤§å¹…å‡å°‘åŒ…ä½“ç§¯ï¼Œåªåœ¨å®¢æˆ·ç«¯åŠ è½½ä¸€ä¸ªä¸åˆ°4KBçš„è½»é‡è¿è¡Œæ—¶ã€‚

`nuxt-echarts`å°†å„ç§ä½¿ç”¨åœºæ™¯å°è£…æˆäº†ç»„ä»¶ï¼Œé™¤äº†å¸¸ç”¨çš„`<VChart>`ï¼Œè¿˜æœ‰åŸºäº[æœåŠ¡ç«¯ç»„ä»¶](https://nuxt.com.cn/docs/guide/directory-structure/components#æœåŠ¡å™¨ç«¯ç»„ä»¶)çš„`VChartIsland`ã€`<VChartServer>`å’Œ`<VChartLight>`,åˆ†åˆ«å¯¹åº”ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼š

|ç»„ä»¶|æ¸²æŸ“æ–¹æ¡ˆ|åŠ è½½é‡|åŠŸèƒ½å’Œäº¤äº’ä¸§å¤±|æ¨èåœºæ™¯|
|---|---|---|---|---|
|[`VChart`](https://echarts.nuxt.dev/components/v-chart) åŒæ—¶è®¾ç½® [`ssr:true`](https://echarts.nuxt.dev/getting-started/configuration#ssr)|æœåŠ¡å™¨ç«¯ SVG æ¸²æŸ“åŠ å®¢æˆ·ç«¯ ECharts å»¶è¿ŸåŠ è½½|å¤§|å»¶è¿ŸåŠ è½½å®Œæˆå‰æ— æ³•äº¤äº’|é¦–å±åŠ è½½æ—¶é—´æ•æ„Ÿï¼Œå¯¹å®Œæ•´åŠŸèƒ½å’Œäº¤äº’æœ‰è¾ƒé«˜éœ€æ±‚ï¼Œå›¾è¡¨åŠ è½½åæœ€å¥½ä¸ç«‹å³éœ€è¦äº¤äº’|
|[`VChartIsland`](https://echarts.nuxt.dev/components/v-chart-island)|åªåœ¨æœåŠ¡å™¨ç«¯ SVG æ¸²æŸ“|å°|ä¸æ”¯æŒå›¾ä¾‹åˆ‡æ¢ç³»åˆ—æ˜¾ç¤ºï¼Œä¸æ”¯æŒå·¥å…·æç¤ºç­‰å¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„äº¤äº’|é¦–å±åŠ è½½æ—¶é—´æ•æ„Ÿï¼Œå¯¹å®Œæ•´åŠŸèƒ½å’Œäº¤äº’è¦æ±‚è¾ƒä½|
|[`VChartServer`](https://echarts.nuxt.dev/components/v-chart-server)|åªåœ¨æœåŠ¡å™¨ç«¯ SVG æ¸²æŸ“|å°|ä¸ä¸Šé¢ç›¸åŒï¼Œä½†å¯ä»¥ [`inject`](https://cn.vuejs.org/guide/components/provide-inject) ç”±ç¥–å…ˆç»„ä»¶`provide`çš„æ•°æ®|ä¸ä¸Šé¢ç›¸åŒ|
|[`VChartLight`](https://echarts.nuxt.dev/components/v-chart-light)|æœåŠ¡å™¨ç«¯ SVG æ¸²æŸ“åŠ å®¢æˆ·ç«¯è½»é‡çº§è¿è¡Œæ—¶|å°|æ— æ³•å®ç°å¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„äº¤äº’|é¦–å±åŠ è½½æ—¶é—´æ•æ„Ÿï¼Œå¯¹å®Œæ•´åŠŸèƒ½å’Œäº¤äº’è¦æ±‚è¾ƒä½ï¼Œå¯¹ä»£ç é‡æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œå¯¹äº¤äº’å®æ—¶æ€§è¦æ±‚ä¸ä¸¥æ ¼|

[Examples â†’](https://echarts.nuxt.dev)

åœ¨[Nuxt EChartsæ–‡æ¡£](https://echarts.nuxt.dev)ä¸­æ¢ç´¢æ›´å¤šç»†èŠ‚å§,æ¬¢è¿åœ¨[Issues](https://github.com/kingyue737/nuxt-echarts/issues)å’Œ[Discussions](https://github.com/kingyue737/nuxt-echarts/discussions)ä¸­æå‡ºä»»ä½•é—®é¢˜ä¸å»ºè®®ï¼
